<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings Test Page</title>
    <link rel="icon" href="default-icon.ico"> <!-- Default icon -->
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .settings { margin-bottom: 20px; }
        .settings input { display: block; margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>Settings Test Page</h1>
    
    <div class="settings">
        <label for="tab-name-input">Tab Name:</label>
        <input type="text" id="tab-name-input" placeholder="Enter tab name">
        <button id="set-tab-name">Set Tab Name</button>
        
        <label for="icon-url-input">Favicon URL:</label>
        <input type="text" id="icon-url-input" placeholder="Enter favicon URL">
        <button id="set-tab-icon">Set Favicon</button>
        
        <label for="set-panic-key-box">Panic Key:</label>
        <input type="text" class="set-panic-key-box" placeholder="Enter panic key">
        <button id="set-panic-key">Set Panic Key</button>
        <button id="ad-panic-key">Auto-Detect Panic Key</button>
        
        <label for="set-panic-url-box">Panic URL:</label>
        <input type="text" class="set-panic-url-box" placeholder="Enter panic URL">
        <button id="set-panic-url">Set Panic URL</button>
    </div>

    <script>
// Function to apply stored settings
function applyStoredSettings() {
    // Apply tab name from local storage
    var storedTabName = localStorage.getItem('tabName');
    if (storedTabName) {
        document.title = storedTabName;
        document.getElementById('tab-name-input').value = storedTabName;
    }

    // Apply favicon from local storage
    var storedIconUrl = localStorage.getItem('iconUrl');
    if (storedIconUrl) {
        var link = document.querySelector("link[rel='shortcut icon'], link[rel='icon']");
        if (link) {
            link.href = storedIconUrl;
        } else {
            link = document.createElement('link');
            link.rel = 'icon';
            link.href = storedIconUrl;
            document.head.appendChild(link);
        }
        document.getElementById('icon-url-input').value = storedIconUrl;
    }

    // Apply panic key from local storage
    var storedPanicKey = localStorage.getItem('panickey');
    if (storedPanicKey) {
        document.querySelector('.set-panic-key-box').value = storedPanicKey;
    }

    // Apply panic URL from local storage
    var storedPanicUrl = localStorage.getItem('panicurl') || 'https://google.com';
    document.querySelector('.set-panic-url-box').value = storedPanicUrl;
}

// Apply stored settings on page load
window.onload = applyStoredSettings;
    </script
</body>
</html>
